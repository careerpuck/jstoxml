!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.jstoxml=n.exports}}(this,function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=["_selfCloseTag","_attrs"],o=r.join("|"),a=new RegExp(o,"g"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.repeat(t)},c=function(e){return Array.isArray(e)?"array":"object"===(void 0===e?"undefined":n(e))&&null!==e&&e._name?"special-object":e instanceof Date?"date":null===e?"null":void 0===e?"undefined":n(e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="("+Object.keys(t).join("|")+")",r=new RegExp(n,"g");return String(e).replace(r,function(e,n){return t[n]||""})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return Array.isArray(e)?e.map(function(e){var n=Object.keys(e)[0],r=e[n],o=t?s(r,t):r;return""+n+(!0===o?"":'="'+o+'"')}):Object.keys(e).map(function(n){var r=t?s(e[n],t):e[n];return""+n+(!0===e[n]?"":'="'+r+'"')})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=u(e,t);return 0===n.length?"":" "+n.join(" ")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return{_name:t,_content:e[t]}})},d=function(e){var t=c(e);return"string"===t||"number"===t||"boolean"===t||"date"===t||"special-object"===t},b=function(e){return!e.match("<")},v=function(e,t,n){var r="";return e.header&&n&&(r="boolean"==typeof e.header?'<?xml version="1.0" encoding="UTF-8"?>':e.header,e.indent&&(r+="\n")),r};e.toXML=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.depth?o.depth:0,y=i(o.indent,u),p=c(n),g=d(n),m=0===u&&(g||!g&&o._isFirstItem),h="";switch(p){case"special-object":var _=n._name,j=n._content;if(null===j){h=_;break}if(_.match(a))break;var k=Object.assign({},o,{depth:u+1}),O=e(j,k),x=c(O),A=b(O),S=""+(o.indent&&!m?"\n":"")+y,F="undefined"===x||""===O,I="boolean"==typeof n._selfCloseTag?F&&n._selfCloseTag:F,T=I?"/":"",w="<"+_+f(n._attrs,o.attributesFilter)+T+">",C=o.indent&&!A?"\n"+y:"";h=""+S+w+(I?"":""+O+C+"</"+_+">");break;case"object":var E=Object.keys(n);h=E.map(function(a,i){var s=Object.assign({},o,{_isFirstItem:0===i,_isLastItem:i+1===E.length}),u={_name:a};if("object"===c(n[a])&&(r.forEach(function(e){var t=n[a][e];void 0!==t&&(u[e]=t,delete n[a][e])}),void 0!==n[a]._content&&Object.keys(n[a]).length>1)){var f=Object.assign({},n[a]);delete f._content,u._content=[].concat(t(l(f)),[n[a]._content])}return void 0===u._content&&(u._content=n[a]),e(u,s)},o).join("");break;case"function":var L=n(o);h=e(L,o);break;case"array":h=n.map(function(t,r){var a=Object.assign({},o,{_isFirstItem:0===r,_isLastItem:r+1===n.length});return e(t,a)}).join("");break;case"number":case"string":case"boolean":case"date":case"null":default:h=s(n,o.filter)}return h=""+v(o,0,m)+h}});